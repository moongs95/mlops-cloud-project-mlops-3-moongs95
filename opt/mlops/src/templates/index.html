<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>게임 추천 시스템</title>
  <style>
    :root {
      --bg: #0f1115;
      --panel: #151922;
      --text: #e9edf1;
      --muted: #93a0b4;
      --brand: #6aa6ff;
      --brand-2: #8bffb0;
      --border: #273246;
      --card: #141823;
      --card-hover: #182131;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 10% -10%, #1b2550 0%, transparent 35%),
                  radial-gradient(1200px 800px at 100% 0%, #0f442f 0%, transparent 35%),
                  var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Pretendard, Apple SD Gothic Neo, Noto Sans KR, "맑은 고딕", sans-serif;
      line-height: 1.55;
    }

    .container {
      max-width: 1100px;
      margin: 40px auto 80px;
      padding: 0 20px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 24px;
    }

    .title {
      font-size: clamp(22px, 2.6vw, 34px);
      font-weight: 800;
      letter-spacing: -0.3px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
    .title .badge {
      font-size: 12px;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color: #0b1020;
    }

    .panel {
      background: rgba(20, 24, 35, 0.75);
      border: 1px solid var(--border);
      backdrop-filter: blur(6px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
    }

    form.reco-form {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 12px;
      align-items: center;
    }

    label {
      font-size: 13px;
      color: var(--muted);
      display: block;
      margin-bottom: 6px;
    }

    .field { display: flex; flex-direction: column; }

    input[type="number"] {
      appearance: textfield;
      -moz-appearance: textfield;
      background: #0f1320;
      color: var(--text);
      border: 1px solid var(--border);
      padding: 12px 12px;
      border-radius: 12px;
      outline: none;
    }
    input[type="number"]:focus {
      border-color: #3a84ff;
      box-shadow: 0 0 0 3px rgba(58,132,255,.25);
    }

    .btn {
      margin-top: 22px;
      padding: 12px 16px;
      border: 1px solid #2a3b65;
      border-radius: 12px;
      background: linear-gradient(180deg, #1a2750, #13203f);
      color: #eaf1ff;
      font-weight: 700;
      cursor: pointer;
      transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
      box-shadow: 0 6px 20px rgba(25, 71, 180, .22);
      white-space: nowrap;
    }
    .btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .btn:active { transform: translateY(0); }

    .section-title {
      margin: 26px 4px 16px;
      font-size: clamp(18px, 2.2vw, 24px);
      font-weight: 800;
      letter-spacing: -.2px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 16px;
    }
    @media (max-width: 1100px) { .grid { grid-template-columns: repeat(4, 1fr); } }
    @media (max-width: 900px)  { .grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 680px)  { .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 460px)  { .grid { grid-template-columns: 1fr; } }

    .card {
      background: linear-gradient(180deg, var(--card), #0f1320);
      border: 1px solid var(--border);
      border-radius: 18px;
      overflow: hidden;
      transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 18px 35px rgba(0,0,0,.28);
      border-color: #35518c;
      background: linear-gradient(180deg, var(--card-hover), #0f1320);
    }

    .thumb {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      display: block;
      background: #0d1020;
    }

    .card-body {
      padding: 12px 14px 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 88px;
    }

    .game-name {
      margin: 0;
      font-size: 15px;
      font-weight: 700;
      line-height: 1.35;
      letter-spacing: -.2px;
    }

    .links {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: auto;
    }

    .ext {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #cfe0ff;
      text-decoration: none;
      border: 1px dashed #34508a;
      padding: 6px 10px;
      border-radius: 10px;
      transition: background .2s ease, color .2s ease, border-color .2s ease;
    }
    .card:hover .ext {
      background: rgba(48,94,180,.15);
      border-color: #3a76ff;
      color: #eaf1ff;
    }

    .empty {
      color: var(--muted);
      font-size: 15px;
      padding: 18px;
      border: 1px dashed var(--border);
      border-radius: 12px;
      background: rgba(10,14,24,.5);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">
        게임 추천 시스템
        <span class="badge">MLOps Demo</span>
      </div>
    </header>

        <!-- 검색/요청 패널 -->
    <section class="panel" aria-label="추천 요청">
    <form class="reco-form" action="/recommend" method="post">
        <div class="field">
        <label for="user_id">User ID</label>
        <input type="number" id="user_id" name="user_id" placeholder="예: 5" required />
        </div>
        <div class="field">
        <label for="top_k">Top K</label>
        <input type="number" id="top_k" name="top_k" value="5" min="1" max="50" />
        </div>
        <button class="btn" type="submit">추천 받기</button>
    </form>
    </section>

    {% if recommendations %}
    <h2 class="section-title">User {{ user_id }} 추천 결과</h2>

    <!-- 카드 그리드 -->
    <section class="grid" aria-label="추천 게임 목록">
        {% for rec in recommendations %}
        <article class="card">
            <!-- 썸네일: 이미지 없으면 placeholder로 대체 -->
            <a href="https://store.steampowered.com/app/{{ rec.game_id }}/" target="_blank" rel="noopener" aria-label="{{ rec.game_name }} Steam 페이지로 이동">
            <img
                class="thumb"
                src="/static/{{ rec.game_id }}.jpg"
                alt="{{ rec.game_name }} 표지"
                onerror="this.onerror=null;this.src='/static/placeholder.jpg';"
            />
            </a>

            <div class="card-body">
            <h3 class="game-name">{{ rec.game_name }}</h3>

            <!-- 외부 링크 버튼 -->
            <div class="links">
                <a class="ext" href="https://store.steampowered.com/app/{{ rec.game_id }}/" target="_blank" rel="noopener">
                Steam에서 보기 <span aria-hidden="true">↗</span>
                </a>
            </div>
            </div>
        </article>
        {% endfor %}
    </section>
    {% else %}
    <p class="empty">아직 추천이 없습니다. 상단에서 <strong>User ID</strong>와 <strong>Top K</strong>를 입력해 보세요.</p>
    {% endif %}
  </div>
</body>
</html>
